# 会議日程調整ツール 包括的仕様書

## プロジェクト概要
### システム名
会議調整くん (Kaigi Chosei Kun)

### アスキーアートによるUI概要
```
+-----------------------------------------------------------+
|                 会議詳細: チームミーティング               |
| 説明: 週次進捗報告会                                      |
+-----------------------------------------------------------+
| 参加者登録                                                |
| お名前: [安部 あきお_____________]                        |
| コメント: [進捗について詳しく聞きたいです_________]       |
|                                                           |
| 日程選択 (クリックで ○ → △ → × のサイクル)               |
+-----------------------------------------------------------+
| 日時            | 安部あきお | 田中花子 | 山田太郎 | ... |
+-----------------------------------------------------------+
| 2024/02/15 10:00-10:30 [濃い青] |    ○    |    ○    |    ○    | ... |
| 2024/02/15 11:30-12:00 [普通の青] |    ○    |    △    |    ○    | ... |
| 2024/02/15 12:30-13:00 [薄い青] |    ○    |    ×    |    △    | ... |
| 2024/02/15 14:00-14:30 [水色] |    ○    |    ×    |    ×    | ... |
+-----------------------------------------------------------+
```

### 目的
誰もが簡単に会議の日程調整を行えるウェブアプリケーションの開発

## システム要件

### 機能要件
1. 会議作成
   - 誰でも会議を作成可能
   - 複数の時間枠を設定可能
   - アクセストークンによる参加者制御

2. 参加者登録
   - 名前（必須）
   - コメント（任意）

3. 日程回答機能
   - 回答形式: ○（参加可能）、△（調整可能）、×（不可）
   - 新規参加者の初期回答は全て「○」
   - クリックによる回答の循環

### UI/UX要件
1. 参加者画面
   - 水平スクロール対応
   - リアルタイム更新
   - 色付けによる日程可視化
     - 全員○: 濃い青
     - ○と△のみ: 普通の青
     - ×がある場合: 参加可能性に応じて3段階の青色

### 参加者列表示仕様
1. 参加者登録順序
   - 最初に登録した参加者は右端の列から順に配置
   - 新規登録者は常に最左列に追加
   - 登録順序は時系列で管理

2. 画面表示方法
   - デフォルト表示: 直近5-6名の参加者
   - 参加者数が画面幅を超える場合
     - 水平スクロールバーを自動的に表示
     - スクロールにより全参加者の情報を閲覧可能

3. レイアウト制約
   - 最小列幅: 参加者名が完全に表示可能な幅
   - 最大列数: 画面の横幅に応じて動的に調整
   - スクロール時の固定要素: 日時列は常に表示

#### スクロール実装例
```
+-----------------------------------------------------------+
|                 会議詳細: チームミーティング               |
| 説明: 週次進捗報告会                                      |
+-----------------------------------------------------------+
| 日時            | 安部あきお | 田中花子 | 山田太郎 | ... [▶]
+-----------------------------------------------------------+
| 2024/02/15 10:00 | ○ | ○ | ○ | ... |
| 2024/02/15 11:30 | ○ | △ | ○ | ... |
+-----------------------------------------------------------+
```

#### データ構造の考慮
- 参加者IDに基づく時系列管理
- 登録タイムスタンプの保持
- リアルタイム更新時の整合性確保

### 色付けロジック詳細
- 濃い青 (#0000FF): 全参加者が「○」
- 普通の青 (#4169E1): 「○」と「△」のみ、×なし
- 薄い青 (#87CEFA): 1人以上「×」があるが、参加可能性が高い
- 水色 (#87CEEB): 「×」が多く、参加可能性が低い

#### 色付けスコアリング計算方法
1. 各参加者の回答にスコアを割り当て
   - ○: 3点
   - △: 1点
   - ×: 0点

2. 時間枠ごとの総合スコア計算
   ```
   総合スコア = Σ(各参加者の回答スコア)
   最大可能スコア = 参加者数 * 3
   参加可能性比率 = 総合スコア / 最大可能スコア
   ```

3. 色分けの閾値
   - 全員○: 参加可能性比率 = 1.0
   - ○と△のみ: すべての回答が ≥ 1
   - 薄い青: 参加可能性比率 > 0.7
   - 水色: 参加可能性比率 0.4 - 0.7
   - さらに薄い水色: 参加可能性比率 < 0.4

4. 「×」の数による追加判定
   - 「×」の数が少ない場合は、より明るい色を優先

### セキュリティ要件
1. アクセス制御
   - アクセストークンによる認証
   - 主催者: 完全な会議情報閲覧
   - 参加者: 限定的な情報閲覧
   - 未承認ユーザー: アクセス不可

## 技術スタック
- フロントエンド: React (TypeScript)
- バックエンド: Supabase
- スタイリング: Tailwind CSS
- 状態管理: Supabase Real-time Subscriptions

## 開発環境
- Node.js: v16以上
- npm: v8以上
- TypeScript: v4.5以上

## デプロイメント
- Vercel
- Supabase Project

## セキュリティ設定
- 環境変数管理
  - NEXT_PUBLIC_SUPABASE_URL
  - NEXT_PUBLIC_SUPABASE_ANON_KEY
- .gitignoreによる機密情報保護

## 注意事項
- pip3を使用
- Python3を使用
- 日本語対応を最優先

## 更新履歴
- 2025/02/12: 初版作成
- 2025/02/13: 仕様詳細更新
